!function(e,t){"use strict";var n={};e.WaitForIt=n;var r=e.define;!function(e){var t=[],n=[],r=null;function o(){var e=0;for(let r=0;r<t.length;r++){const i=t[r];if(i.has_fired)e+=1;else if(Date.now()>i.timeout){try{i.callback(!1)}catch(e){console.error(e)}i.has_fired=!0,e+=1}else{var o=i.events.every(function(e){return n.indexOf(e)>=0});if(o){try{i.callback(!0)}catch(e){console.error(e)}i.has_fired=!0,e+=1}}}e==t.length&&(clearInterval(r),r=null)}function i(){null===r&&(r=setInterval(function(){o()},100))}e.wait_for=function(e,r,o){var a=e.every(function(e){return n.indexOf(e)>=0});a?r(!0):(t.push({events:e,callback:r,has_fired:!1,timeout:Date.now()+o}),i())},e.await_for=async function(e,r){var o=e.every(function(e){return n.indexOf(e)>=0});if(o)return Promise.resolve(!0);var a,c=new Promise(function(e,t){a=e});return t.push({events:e,callback:a,has_fired:!1,timeout:Date.now()+r}),i(),c},e.trigger=function(e){-1===n.indexOf(e)&&n.push(e),o()}}(n),"function"==typeof r&&r.amd?r(function(){return n}):"object"==typeof exports&&(void 0!==module&&module.exports&&(exports=module.exports=n),exports.WaitForIt=n,module.exports=exports=n)}("object"==typeof window&&window||this);
